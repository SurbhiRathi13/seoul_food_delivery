var RelatedPageRecommendationsClickback;(function(){function w(){var s,c,v,y,p,w,h;try{if(s=null,typeof rprData!="undefined"&&rprData)s=rprData.InsertId,o=rprData.IsInstrumentation,l=rprData.ClickbackAnimationEnabled;else{n(t,i,"RenderDataNotAvailable");return}if(c=st()&&ct(),v=ot(u),typeof _w!="undefined"&&c&&(y=sessionStorage.getItem(r),y&&lt()&&(f.lastLinkClicked=y,a(s,f),n(t,i,"QuickbackTriggered")),sessionStorage.removeItem(r)),typeof _w!="undefined"&&v&&sj_be(_d,u.visibilityChangedEventName,function(){return k(s,f)}),c||v)for(p=_ge(e).children,w=function(n){var t=p.item(n),i;nt(t)&&(i=ft(t),i&&sj_be(t,"click",function(n){return!b(n)&&it(f,i)}))},h=0;h<p.length;h++)w(h);else n(t,i,"NoClickbackTriggerSupported")}catch(d){n(t,i,d?d.message:"Unknown Error")}}function b(n){var t,i;if(n===null||n===void 0?void 0:n.currentTarget)for(t=n.target;t&&t!==n.currentTarget;){for(i=0;i<c.length;i++)if(Lib.CssClass.contains(t,c[i]))return!0;t=t.parentElement}return!1}function k(f,e){try{var s=_d[u.hiddenProperty];e.lastLinkClicked&&(s?(n(t,i,"NewTabLoadTriggered"),a(f,e)):(n(t,i,"RevisitTriggered"),v(e),sessionStorage.removeItem(r)))}catch(o){n(t,i,o?o.message:"Unknown Error")}}function a(r,u){var h,c,l,o=u.lastLinkClicked,s,a,e,f,y;if(!((h=o===null||o===void 0?void 0:o.trim())===null||h===void 0?void 0:h.length)){n(t,i,"EmptyUrlDetected");return}if(s=rt(),!((c=s===null||s===void 0?void 0:s.trim())===null||c===void 0?void 0:c.length)){n(t,i,"EmptyQueryDetected");return}if(a=d(),!a){n(t,i,"CouldNotGetContainerWidth");return}(e=u.linkStates[o]=(l=u.linkStates[o])!==null&&l!==void 0?l:{state:0,recommendationsHtml:undefined},e.state===0)&&(e.state=1,f=sj_gx(),f.onreadystatechange=function(){try{f.readyState===4&&f.status===200?(e.state=2,e.recommendationsHtml=f.responseText,v(u)):f.readyState===4&&f.status===204?(e.state=2,n(t,i,"AsyncNoContent")):(e.state=3,n(t,i,"AsyncLoadError"))}catch(r){n(t,i,r?r.message:"Unknown Error")}},f.open("POST","/relatedPageRecommendations?IID="+r+"&IG="+_G.IG,!0),f.setRequestHeader("content-type","application/json"),f.timeout=1e4,y={url:o,query:s,containerWidth:a},f.send(JSON.stringify(y)))}function d(){var o,s,h,u=_ge(e),f=u.getElementsByClassName("b_algo"),r;return f.length>0?(r=_w.getComputedStyle(f[0]),((o=f[0])===null||o===void 0?void 0:o.clientWidth)&&(r===null||r===void 0?void 0:r.paddingLeft)&&(r===null||r===void 0?void 0:r.paddingRight)?f[0].clientWidth-parseInt(r.paddingLeft)-parseInt(r.paddingRight):(n(t,i,"Unable to get the container width. Fall back to the width of #b_results"),(h=(s=f[0])===null||s===void 0?void 0:s.clientWidth)!==null&&h!==void 0?h:u===null||u===void 0?void 0:u.clientWidth)):(n(t,i,"No b_algo results. Fall back to the width of #b_results"),u===null||u===void 0?void 0:u.clientWidth)}function v(r){var h,p,w,u,b,f,a,v;if(!tt(r))return!1;u=r.lastLinkClicked;b=r.linkStates[u];r.lastLinkClicked=undefined;var d=_ge(e),k=d.children,c=-1;for(f=0;f<d.children.length;f++)if(a=y(k[f]),(u===null||u===void 0?void 0:u.length)&&(a===null||a===void 0?void 0:a.getAttribute("href"))===u){c=f;break}if(c!==-1){if(o)n(t,"ClickbackAddedInst","");else{if(sj_appHTML(k[c],b.recommendationsHtml),l){if(v=(w=(p=(h=k[c])===null||h===void 0?void 0:h.getElementsByClassName)===null||p===void 0?void 0:p.call(h,s))===null||w===void 0?void 0:w[0],!v)return;g(v);Lib.CssClass.remove(v,"b_hide")}n(t,"ClickbackAdded","")}return n(t,i,"InsertedRecommendations"),b.recommendationsHtml=undefined,typeof rms=="undefined"||o||rms.start(),!0}return!1}function g(n){var u=new sj_anim(function(n,t){n.style.height=Math.ceil(t)+"px"}),t=u.getInterval()/1500,i=.3/t,e=h/i,r,f;u.init(n,0,h,e,function(){});n.style.opacity="0";r=new sj_anim(function(n,t){n.style.opacity=t.toString()});t=r.getInterval()/1500;i=.3/t;f=1/i;r.init(n,0,1,f,function(){})}function nt(n){var t;return((t=n===null||n===void 0?void 0:n.className)===null||t===void 0?void 0:t.indexOf(p))>=0&&n.getElementsByClassName(s).length===0}function tt(n){var t=n.linkStates[n.lastLinkClicked];return!_d[u.hiddenProperty]&&Boolean(t===null||t===void 0?void 0:t.recommendationsHtml)&&t.state===2}function it(n,t){(t===null||t===void 0?void 0:t.length)&&!n.linkStates[t]?(n.lastLinkClicked=t,ht(r,n.lastLinkClicked)||(n.lastLinkClicked=undefined)):n.lastLinkClicked=undefined}function rt(){var n,t,i=(t=(n=_w.location)===null||n===void 0?void 0:n.search)===null||t===void 0?void 0:t.match(new RegExp("[?&]{1}q=([^&]+)"));return i?decodeURI(i[1]):null}function ut(n){return!!n.match(/^http[s]?:\/\/.+|^www\..+/)}function ft(n){var t=y(n);return t&&(t===null||t===void 0?void 0:t.hasAttribute("href"))&&ut(t.getAttribute("href"))?t.getAttribute("href"):null}function y(n){for(var t,i=0;i<n.children.length;i++)for(t=n.children.item(i);t;){if(t.nodeName=="A")return t;t=t.firstElementChild}return null}function et(){var i=undefined,r=undefined,t,n;if("hidden"in _d)i="hidden",r="visibilitychange";else for(t=["webkit","moz","ms","o"],n=0;n<t.length;n++)if(t[n]+"Hidden"in _d){i=t[n]+"Hidden";r=t[n]+"visibilitychange";break}return{hiddenProperty:i,visibilityChangedEventName:r}}function ot(n){return!!(n&&n.hiddenProperty&&n.visibilityChangedEventName)}function st(){if(typeof Storage=="undefined"||typeof sessionStorage=="undefined")return!1;try{sessionStorage.setItem(r+"Test","test");sessionStorage.removeItem(r+"Test")}catch(n){return!1}return!0}function ht(n,t){try{sessionStorage.setItem(n,t)}catch(i){return!1}return!0}function ct(){var t,n,i,r;return!!(((t=_w===null||_w===void 0?void 0:_w.performance)===null||t===void 0?void 0:t.navigation)||((r=(i=(n=_w===null||_w===void 0?void 0:_w.performance)===null||n===void 0?void 0:n.getEntriesByType)===null||i===void 0?void 0:i.call(n,"navigation"))===null||r===void 0?void 0:r.length)>0)}function lt(){var n,t,i,r,u;return"performance"in _w&&(((r=(i=(t=(n=_w.performance)===null||n===void 0?void 0:n.getEntriesByType)===null||t===void 0?void 0:t.call(n,"navigation"))===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.type)==="back_forward"||((u=_w.performance.navigation)===null||u===void 0?void 0:u.type)&&_w.performance.navigation.type===_w.performance.navigation.TYPE_BACK_FORWARD)}var n=function(n,t,i){_w.sj_log&&sj_log(n,t,i)},r="qbClickedIdx",t="RPR.CB",i="ClickbackLog",e="b_results",p="b_algo",s="scs_child_rpr",h=174,c=["scs_exp"],o=!1,l=!1,u=et(),f={lastLinkClicked:undefined,linkStates:{}};w();_w.sj_evt&&sj_evt.fire("rpr_cb_load_init")})(RelatedPageRecommendationsClickback||(RelatedPageRecommendationsClickback={}))